# =============================================================================
# CONFIGURACIÓN DE MICROSERVICIOS LÜMIS - RUST
# =============================================================================
# Configuración para la arquitectura de microservicios
# =============================================================================

# -----------------------------------------------------------------------------
# GENERAL CONFIGURATION
# -----------------------------------------------------------------------------
ENVIRONMENT=development
RUST_LOG=info,shared=debug,api_gateway=debug,qr_detection_service=debug

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://usuario:password@localhost:5432/lumis_db
DATABASE_MAX_CONNECTIONS=20
DATABASE_MIN_CONNECTIONS=5
DATABASE_ACQUIRE_TIMEOUT_SECONDS=30
DATABASE_IDLE_TIMEOUT_SECONDS=600
DATABASE_MAX_LIFETIME_SECONDS=1800

# -----------------------------------------------------------------------------
# REDIS CONFIGURATION
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379
REDIS_POOL_SIZE=10
REDIS_CONNECTION_TIMEOUT_SECONDS=5

# -----------------------------------------------------------------------------
# JWT AUTHENTICATION
# -----------------------------------------------------------------------------
JWT_SECRET=your-super-secret-jwt-key-here-min-32-chars-for-production
JWT_ACCESS_TOKEN_TTL_SECONDS=900
JWT_REFRESH_TOKEN_TTL_SECONDS=604800

# -----------------------------------------------------------------------------
# SERVICE URLS
# -----------------------------------------------------------------------------
API_GATEWAY_URL=http://localhost:8000
QR_DETECTION_SERVICE_URL=http://localhost:8001
OCR_PROCESSING_SERVICE_URL=http://localhost:8002
REWARDS_ENGINE_SERVICE_URL=http://localhost:8003
USER_MANAGEMENT_SERVICE_URL=http://localhost:8005
NOTIFICATION_SERVICE_URL=http://localhost:8006

# -----------------------------------------------------------------------------
# SERVICE PORTS
# -----------------------------------------------------------------------------
API_GATEWAY_PORT=8000
QR_DETECTION_PORT=8001
OCR_PROCESSING_PORT=8002
REWARDS_ENGINE_PORT=8003
USER_MANAGEMENT_PORT=8005
NOTIFICATION_PORT=8006

# -----------------------------------------------------------------------------
# WHATSAPP CONFIGURATION
# -----------------------------------------------------------------------------
VERIFY_TOKEN=tu_token_secreto_aqui
WHATSAPP_TOKEN=tu_whatsapp_token_aqui
PHONE_NUMBER_ID=tu_phone_number_id_aqui
WHATSAPP_API_BASE_URL=https://graph.facebook.com/v18.0

# -----------------------------------------------------------------------------
# TELEGRAM CONFIGURATION
# -----------------------------------------------------------------------------
TELEGRAM_BOT_TOKEN=tu_telegram_bot_token_aqui
SECURE_TOKEN=tu_secure_token_para_telegram

# -----------------------------------------------------------------------------
# PERFORMANCE SETTINGS
# -----------------------------------------------------------------------------
MAX_REQUEST_SIZE_MB=10
REQUEST_TIMEOUT_SECONDS=30
MAX_REQUESTS_PER_MINUTE=60

# -----------------------------------------------------------------------------
# QR DETECTION SETTINGS
# -----------------------------------------------------------------------------
QR_PARALLEL_DECODING=true
QR_MAX_RETRIES=3
QR_TIMEOUT_SECONDS=30

# -----------------------------------------------------------------------------
# OCR SETTINGS
# -----------------------------------------------------------------------------
OCR_TRUST_SCORE_ENABLED=true
OCR_BASE_COST_LUMIS=0
OCR_MAX_COST_LUMIS=15

# -----------------------------------------------------------------------------
# CACHE TTL SETTINGS (seconds)
# -----------------------------------------------------------------------------
USER_CACHE_TTL_SECONDS=1800
RATE_LIMIT_CACHE_TTL_SECONDS=60
QR_DETECTION_CACHE_TTL_SECONDS=3600
OCR_RESULT_CACHE_TTL_SECONDS=3600
USER_BALANCE_CACHE_TTL_SECONDS=300
INVOICE_DATA_CACHE_TTL_SECONDS=86400

# -----------------------------------------------------------------------------
# CORS CONFIGURATION
# -----------------------------------------------------------------------------
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080

# =============================================================================
# INSTRUCCIONES DE USO:
# =============================================================================
# 1. Copia este archivo como .env en cada directorio de servicio
# 2. Personaliza los valores según tu entorno
# 3. En producción, usa secretos seguros y URLs reales
# 4. Ajusta los puertos según tu configuración de red
# =============================================================================